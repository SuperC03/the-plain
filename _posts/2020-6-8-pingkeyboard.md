---
title: My /r/BadUI Ping based keyboard was vulnerable to remote code execution and was exploited
date: 2020-6-08
---

Recently I published a badUI I created to the subreddit [r/badUIBattles](https://www.reddit.com/r/badUIbattles/). This subreddit is known for being a place to post "Intentionally bad User Interfaces." The idea behind the UI was simple. The user enters an IP address, this gets sent to the server which pings the address, the ping time is converted to a character by running it through the modulo operation with a modulus of 27. Values 1-26 were turned into their corresponding character, with 0 being assigned to space.
    
That ping time was data from the NPM module `ping`, With such a simple name, 185 dependents, and 13 thousand downloads a week I figured the module itself would be secure. I was wrong and should have known better not to trust my poorly based assumptions. For some reason I just assumed it would have security built it. When I made my badUI public at [https://pingkeyboard.voyager1.hampton.pw/](https://pingkeyboard.voyager1.hampton.pw/), I pretty quickly noticed something strange. I went to edit the live index.html and noticed it said "bruh" at the bottom of the page. This was strange so I checked git to see if I had accidentally typed that, I hadn't there was no record of it in git. This scared me so I decided to try an remote code execution attack it, and sure enough, it worked. The simple input "127.0.0.1;echo bruh>>index.html" wrote bruh to the bottom of my index.html. Filled with horror I quickly deleted the docker container my code was running in, fixed it using a simple regex to make sure the input was a valid IPv4 address and checked through the source code behind the ping module. Sure enough, nothing was checking that the input was a valid IP address or hostname. 

This event reinforced my knowledge of a couple of things, always check through the modules that you are using, do not trust that they have security built into them. Even if the code seems secure still never trust user input, do not give the users the ability to input anything they should not be able to. Finally, to at least do some basic vulnerability check on my projects especially when I am sending it to a group of programmers like on r/badUI. What bugs me the most out of all of this is I knew all of this, I knew not to trust user input, I knew to sanitize, I knew to never trust modules to do security for me, but I had never had anything happen to force me to remember it.

TLDR: I was not thinking and blindly trusted the security of a node module and user input. This meant someone could execute remote code on my server, they ended up appending "bruh" to my index.html file. In the end, there was no long-term damage and I learned through failing the importance of validating and sanitizing user input.